var main = {
  init: function(){
    $('.fn-refresh').click(main.posts.refresh);
  },
  loading: {
    popup: function(){
      $.mobile.loading( 'show' );
      setTimeout( function(){ $.mobile.loading('hide'); }, 5000);
    }
  },
  posts: {
    refresh: function(){
      main.posts.list();
    },
    list: function(){
      var data = [
        { image: 'http://images.hamshahrionline.ir/images/position36/2013/10/musighe-920709-as.jpg', title: 'ادعاهای نتانیاهو در مجمع عمومی سازمان ملل درباره ایران' }, 
        { image: 'http://images.hamshahrionline.ir/images/position36/2013/10/obama.jpg', title: 'شهردار تهران در اردوی استقلال حاضر شد/ مدیرعامل سابق پرسپولیس هم به هتل المپیک رفت' },
        { image: 'http://images.hamshahrionline.ir/images/position36/2013/10/netanyaho.jpg', title: 'خروج از رکود تورمی؛ چگونه؟' } 
      ];
      var list = $('.template .fn-post').template( data, { appendTo: '.fn-posts' } );
      main.posts.actions(list);
    },
    actions: function(list){
      $(list).swipe({
        swipe:function(event, direction, distance, duration, fingerCount) {
          $(this).animate({ left: -$(window).outerWidth() }, function(){ $(this).slideUp() } );
        }
      });
      $('.fn-more', scope).click( main.posts.more );
      $('.fn-like', scope).click( main.posts.like );
      $('.fn-dislike', scope).click( main.posts.dislike );
    },
    more: function(){
      $(this).parents('.fn-post').find('.fn-description').slideToggle();
      $(this).parents('.fn-post').toggleClass('expanded');
    },
    like: function(){
      $(this).parents('.fn-post').addClass('liked');
    },
    dislike: function(){
      $(this).parents('.fn-post').removeClass('liked');
    }
  }
};
